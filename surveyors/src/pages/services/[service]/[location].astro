---
import Layout from '../../../layouts/Layout.astro';
import { getServiceLocationPaths, capitalize, locationContent, type LocationKey, generateLocationSchema } from '../../../utils/seo';

export async function getStaticPaths() {
  const paths = getServiceLocationPaths();
  console.log('Generated service+location paths:', JSON.stringify(paths, null, 2));
  return paths;
}

interface Props {
  service: string;
  location: string;
  title: string;
  description: string;
}

const { service, location, title, description } = Astro.props;

// Format display names
const formattedService = service.split('-').map(capitalize).join(' ');
const capitalizedLocation = capitalize(location);

// Get additional location data
const locationKey = location as LocationKey;
const content = locationContent[locationKey] || null;

// Service-specific content
const serviceContent = {
  'drone-surveying': {
    description: `Our professional drone surveying services in ${capitalizedLocation} deliver high-precision aerial mapping and data collection for engineering, construction, and mining projects. Using advanced UAV technology with LiDAR capabilities, we provide accurate topographical surveys, volumetric calculations, and detailed 3D terrain models.`,
    benefits: [
      "High-resolution orthomosaic mapping",
      "Accurate terrain modeling for design and planning",
      "Rapid data collection for large or difficult-to-access areas",
      "Detailed inspection of structures and assets",
      "Regular progress monitoring for construction projects"
    ],
    applications: [
      "Construction site monitoring",
      "Mining and quarry operations",
      "Infrastructure development",
      "Environmental assessment",
      "Land development and planning"
    ],
    image: "/images/hr-surveyors-drone-survey.jpg"
  },
  'engineering-surveying': {
    description: `Expert engineering surveying services across ${capitalizedLocation} delivered by our highly qualified team. We provide precise measurements, control networks, and spatial data essential for engineering design, construction layout, and quality assurance on projects of all sizes.`,
    benefits: [
      "Precise control networks for consistent project accuracy",
      "Detailed topographic surveys for engineering design",
      "Accurate construction layout and stakeout",
      "Monitoring services to ensure structural integrity",
      "Comprehensive as-built documentation"
    ],
    applications: [
      "Road and highway construction",
      "Bridge and tunnel engineering",
      "Railway projects",
      "Utility infrastructure",
      "Commercial development"
    ],
    image: "/images/hr-surveyors-engineering-surveying.jpg"
  },
  'land-surveying': {
    description: `Professional land surveying services in ${capitalizedLocation}, providing accurate boundary determinations, subdivision layouts, and title surveys. Our licensed surveyors combine traditional methods with modern technology to deliver reliable results for property transactions, development, and legal compliance.`,
    benefits: [
      "Accurate boundary determinations",
      "Detailed site plans for development applications",
      "Subdivision design and implementation",
      "Easement location and documentation",
      "Expert witness services for property matters"
    ],
    applications: [
      "Property transactions",
      "Land development and subdivision",
      "Boundary dispute resolution",
      "Planning and zoning compliance",
      "Legal documentation"
    ],
    image: "/images/hr-surveyors-land-surveying.jpg"
  }
};

type ServiceKey = 'drone-surveying' | 'engineering-surveying' | 'land-surveying';
const currentService = serviceContent[service as ServiceKey] || serviceContent['engineering-surveying'];

// Generate schema markup
const schema = {
  "@context": "https://schema.org",
  "@type": "Service",
  "name": `${formattedService} in ${capitalizedLocation}`,
  "description": currentService.description,
  "provider": {
    "@type": "ProfessionalService",
    "name": `HR Surveyors ${capitalizedLocation}`,
    "address": {
      "@type": "PostalAddress",
      "addressLocality": capitalizedLocation,
      "addressCountry": "AU"
    }
  },
  "areaServed": {
    "@type": "Place",
    "name": capitalizedLocation,
    "address": {
      "@type": "PostalAddress",
      "addressRegion": locationKey === "melbourne" || locationKey === "geelong" ? "VIC" : 
                      locationKey === "perth" ? "WA" : 
                      locationKey === "brisbane" ? "QLD" : 
                      locationKey === "adelaide" ? "SA" : "Australia",
      "addressCountry": "AU"
    }
  }
};
---

<Layout 
  title={title}
  description={description}
  location={locationKey}
  schema={schema}
>
  <main class="bg-white text-hr-dark">
    <section class="py-16 md:py-24 lg:py-32">
      <div class="container mx-auto px-4 max-w-6xl">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-8 text-hr-dark text-center">
          {formattedService} in {capitalizedLocation}
        </h1>
        
        <div class="mb-16">
          <p class="text-xl mb-6 leading-relaxed text-center max-w-3xl mx-auto">
            {currentService.description}
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16">
          <div>
            <img 
              src={currentService.image} 
              alt={`${formattedService} services in ${capitalizedLocation}`}
              class="rounded-lg shadow-lg w-full h-auto object-cover"
              width="600"
              height="400"
            />
          </div>
          <div>
            <h2 class="text-2xl font-bold mb-6">Benefits of Our {formattedService} Services</h2>
            <ul class="space-y-4">
              {currentService.benefits.map((benefit: string) => (
                <li class="flex items-start">
                  <span class="text-hr-accent mr-2">✓</span>
                  <span>{benefit}</span>
                </li>
              ))}
            </ul>
            
            <h2 class="text-2xl font-bold mt-10 mb-6">Common Applications</h2>
            <ul class="space-y-4">
              {currentService.applications.map((application: string) => (
                <li class="flex items-start">
                  <span class="text-hr-accent mr-2">→</span>
                  <span>{application}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>

        <div class="bg-gray-50 rounded-lg p-8 border-l-4 border-hr-accent mb-16">
          <h2 class="text-2xl font-bold mb-4">Why Choose HR Surveyors in {capitalizedLocation}?</h2>
          <p class="mb-4">With extensive local knowledge of {capitalizedLocation} and surrounding areas, our team delivers accurate, reliable surveying services tailored to your specific project requirements.</p>
          <p>Our commitment to quality, fast turnaround times, and competitive pricing makes us the preferred choice for {formattedService.toLowerCase()} projects across {content?.description.split('.')[0] || capitalizedLocation}.</p>
        </div>

        <div class="text-center">
          <h2 class="text-2xl font-bold mb-6">Ready to Start Your {formattedService} Project?</h2>
          <p class="text-lg mb-8 max-w-2xl mx-auto">
            Contact our {capitalizedLocation} team for a no-obligation quote and discover how we can help with your next project.
          </p>
          <a 
            href="/contact" 
            class="inline-block bg-hr-accent text-hr-dark px-6 py-3 rounded text-lg font-semibold hover:bg-opacity-90 transition-colors relative overflow-hidden group"
          >
            <span class="relative z-10 group-hover:text-white transition-colors">Request a Quote</span>
            <span class="absolute inset-0 bg-hr-dark transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"></span>
          </a>
        </div>
      </div>
    </section>
  </main>
</Layout> 