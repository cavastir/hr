---
import Layout from '../layouts/Layout.astro';
import { fade } from 'astro:transitions';

const officeLocations = [
  {
    title: "VIC Office HQ",
    address: "8/20 Duerdin Street, Clayton, VIC 3168",
    lat: -37.916055,
    lng: 145.131505
  },
  {
    title: "Geelong Office",
    address: "265 Packington Street, Newtown, VIC 3220",
    lat: -38.153078,
    lng: 144.345105
  },
  {
    title: "WA Office",
    address: "1/435 Vincent Street West, West Leederville, WA 6007",
    lat: -31.933078,
    lng: 115.825105
  },
  {
    title: "QLD/Northern NSW Office",
    address: "36-42 Murwillumbah Street, Murwillumbah, NSW 2484",
    lat: -28.333078,
    lng: 153.395105
  }
];
---

<Layout 
  title="Our Locations | HR Surveyors"
  description="Explore HR Surveyors' office locations across Australia. Find your nearest office in Victoria, Western Australia, Queensland, and New South Wales."
>
  <main class="bg-hr-dark text-white">
    <section class="py-24">
      <div class="container mx-auto px-4 max-w-6xl">
        <h1 transition:animate={fade({ duration: '0.5s' })} class="text-5xl lg:text-6xl font-bold mb-12 text-hr-accent text-center">Our Locations</h1>
        <div class="flex flex-col md:flex-row gap-12 items-center mb-20">
          <div id="map" class="w-full md:w-1/2 h-[600px] rounded-lg shadow-xl"></div>
          <div class="w-full md:w-1/2 space-y-6">
            {officeLocations.map((office) => (
              <div class="bg-hr-dark-lighter rounded-lg p-6 shadow-lg">
                <h3 class="text-xl font-semibold mb-2 text-hr-accent">{office.title}</h3>
                <p class="text-lg mb-4">{office.address}</p>
                <a 
                  href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(office.address)}`} 
                  target="_blank" 
                  rel="noopener noreferrer"
                  class="text-hr-accent hover:underline inline-flex items-center"
                >
                  Get Directions
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </a>
              </div>
            ))}
          </div>
        </div>

        <div class="bg-hr-dark-lighter rounded-lg p-12 mb-20 shadow-lg">
          <h2 class="text-3xl font-bold mb-8 text-hr-accent">Our Reach</h2>
          <p class="text-lg mb-6 leading-relaxed">
            With multiple locations across Australia, we have the capacity to support projects nationwide, providing local expertise and timely service wherever it's needed. This specialized focus sets us apart from other survey companies, allowing us to consistently meet and exceed industry demands with confidence and reliability.
          </p>
        </div>

        <div class="text-center">
          <a href="/contact" class="bg-hr-accent text-hr-dark px-6 py-3 rounded font-semibold hover:bg-opacity-90 transition-all duration-300 inline-flex items-center space-x-2 group focus:outline-none">
            <span>Get in Touch</span>
            <span class="group-hover:translate-x-1 transition-transform">â†’</span>
          </a>
        </div>
      </div>
    </section>
  </main>
</Layout>

<script define:vars={{ apiKey: import.meta.env.GOOGLE_MAPS_API_KEY, officeLocations }}>
  function loadGoogleMapsScript() {
    const script = document.createElement('script');
    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap`;
    script.defer = true;
    document.head.appendChild(script);
  }

  function initMap() {
    const australiaCenter = { lat: -25.2744, lng: 133.7751 };
    const map = new google.maps.Map(document.getElementById("map"), {
      zoom: 4,
      center: australiaCenter,
      styles: [
        {
          featureType: "all",
          elementType: "labels.text",
          stylers: [{ visibility: "off" }]
        },
        {
          featureType: "administrative.country",
          elementType: "geometry.stroke",
          stylers: [{ visibility: "on" }, { color: "#ffffff" }]
        },
        {
          featureType: "landscape",
          elementType: "geometry.fill",
          stylers: [{ color: "#2c2c2c" }]
        },
        {
          featureType: "water",
          elementType: "geometry.fill",
          stylers: [{ color: "#1a1a1a" }]
        }
      ]
    });

    officeLocations.forEach((office) => {
      if (office.lat && office.lng) {
        new google.maps.Marker({
          position: { lat: office.lat, lng: office.lng },
          map: map,
          title: office.title,
        });
      }
    });
  }

  window.initMap = initMap;
  loadGoogleMapsScript();
</script>